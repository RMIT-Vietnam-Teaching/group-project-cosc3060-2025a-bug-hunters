
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Add Coins</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <script src="https://js.stripe.com/v3/"></script>

  <style>
    body {
      background-color: #fff;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    }
    .form-box {
      border: 1px solid #ccc;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 30px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      background-color: #fff;
    }
    .order-summary {
      border: 1px solid #ccc;
      padding: 20px;
      border-radius: 12px;
      background-color: #fff;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }
    .checkout-btn {
      background-color: #e26d4d;
      color: white;
      font-weight: 600;
      padding: 12px 24px;
      border-radius: 8px;
      border: none;
      width: 100%;
      transition: background-color 0.2s ease-in-out;
    }
    .checkout-btn:hover {
      background-color: #c95535;
    }
    .select-btn {
      border: 1px solid #e26d4d;
      color: #e26d4d;
      background: transparent;
      border-radius: 6px;
      padding: 6px 16px;
      font-weight: 500;
      transition: all 0.2s;
    }
    .select-btn:hover {
      background-color: #e26d4d;
      color: white;
    }
    .form-control::placeholder {
      color: #aaa;
    }
    .form-label {
      margin-bottom: 4px;
    }
    .form-section {
      margin-bottom: 1.5rem;
    }
    .special-deal-item {
      border-bottom: 1px solid #eee;
      padding: 8px 0;
    }
    .toggle-visibility {
      position: absolute;
      top: 50%;
      right: 16px;
      transform: translateY(-50%);
      cursor: pointer;
      font-size: 18px;
      color: #666;
      z-index: 10;
    }
    .toggle-visibility-icon {
      position: absolute;
      top: 50%;
      right: 16px;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: #666;
      font-size: 18px;
      z-index: 10;
    }


  </style>
</head>
<body>

  <!-- navbar -->
  <%- include('partials/navbar') %>

  <!-- main content -->
  <div class="container py-5">
    <h3 class="fw-bold mb-4">Add More Coin</h3>
    <div class="row">
      <div class="col-lg-8">
        <form class="form-box">
          <div class="row form-section align-items-end">
            <div class="col-md-6">
              <label class="form-label fw-bold">Insert Coin You Want to Add</label>
              <input type="number" class="form-control" placeholder="Enter amount" id="coinInput">
            </div>
            <div class="col-md-6 text-end">
              <label class="form-label fw-bold">Current Coin: <span class="text-primary">1234</span></label>
            </div>
          </div>

          <hr class="my-3">

          <div class="form-section">
            <label class="form-label fw-bold mb-2">Special Deals</label>
          
            <div class="special-deal-item d-flex justify-content-between align-items-center" data-base="100" data-bonus="10">
              <span>Buy 100 Coins, Get 10 Extra</span>            
              <div>
                <button type="button" class="select-btn me-2 add-package">Select</button>
                <button type="button" class="btn btn-sm btn-outline-danger remove-package d-none">Remove</button>
              </div>
            </div>
          
            <div class="special-deal-item d-flex justify-content-between align-items-center" data-base="250" data-bonus="50">
              <span>Buy 250 Coins, Get 50 Extra</span>            
              <div>
                <button type="button" class="select-btn me-2 add-package">Select</button>
                <button type="button" class="btn btn-sm btn-outline-danger remove-package d-none">Remove</button>
              </div>
            </div>
          
            <div class="special-deal-item d-flex justify-content-between align-items-center" data-base="1000" data-bonus="100">
              <span>Buy 1000 Coins, Get 100 Extra</span>            
              <div>
                <button type="button" class="select-btn me-2 add-package">Select</button>
                <button type="button" class="btn btn-sm btn-outline-danger remove-package d-none">Remove</button>
              </div>
            </div>
          </div>
          
          <hr class="my-3">
          <div class="form-section position-relative">
            <label class="form-label fw-bold">Card Number</label>
            <div class="position-relative">
              <input type="text" class="form-control pe-5" id="cardNumberInput"
                     readonly
                     value="**** **** **** <%= cardInfo?.cardNumber?.slice(-4) || '4242' %>">
            </div>
          </div>          
          
          <div class="row form-section">
            <div class="col-md-6">
              <label class="form-label fw-bold">Expiry Date</label>
              <input type="text" class="form-control" name="expirationDate" placeholder="MM/YY"
                     value="<%= cardInfo?.expirationDate || '' %>" pattern="\d{2}/\d{2}" required>
            </div>
            <div class="col-md-6 position-relative">
              <label class="form-label fw-bold">CVC</label>
              <div class="position-relative">
                <input type="password" class="form-control pe-5" id="cvcInput" name="cvv" 
                       placeholder="CVC"
                       value="<%= cardInfo?.cvv || '' %>" maxlength="4" pattern="[0-9]{3,4}" required>
                <button type="button" class="btn toggle-visibility-icon" onclick="toggleVisibility('cvcInput', this)">
                  <i class="bi bi-eye-fill"></i>
                </button>
              </div>
            </div>
          </div>
          <div class="form-section">
            <label class="form-label fw-bold">Name on Card</label>
            <input type="text" class="form-control" id="cardholder-name" placeholder="Name on Card" value="<%= cardInfo?.cardHolderName || '' %>">
          </div>
        </form>
      </div>
      <div class="col-lg-4">
        <div class="order-summary">
          <h5 class="fw-bold mb-3">Order Summary</h5>
          <hr>
          <p class="mb-1">Purchased Coin: <strong id="coinAmount">$20</strong></p>
          <p class="mb-3">Total Price: <strong id="totalPrice">$200</strong></p>
          <p id="bonusInfo" class="text-success fw-semibold mb-3"></p>          
          <button class="checkout-btn mb-3">Pay Now</button>

          <ul class="list-group mt-3" id="selectedPackagesList"></ul>

        </div>
      </div>
    </div>
  </div>
  <script>
    const coinInput = document.getElementById('coinInput');
    const coinAmountDisplay = document.getElementById('coinAmount');
    const totalPriceDisplay = document.getElementById('totalPrice');
    const bonusInfo = document.getElementById('bonusInfo');
    
    // Update summary logic
    function updateSummary() {
      const amount = parseInt(coinInput.value) || 0;
      let bonus = 0;
    
      if (amount >= 100 && amount < 250) bonus = 10;
      else if (amount >= 250 && amount < 1000) bonus = 50;
      else if (amount >= 1000) bonus = 100;
    
      const total = amount + bonus;
      coinAmountDisplay.textContent = `${total} Coins`;
      totalPriceDisplay.textContent = `$${amount.toFixed(2)}`;
      bonusInfo.textContent = bonus ? `ðŸŽ Extra coin: ${bonus}` : '';
    }
    
    // Manual entry
    coinInput.addEventListener('input', () => {
      updateSummary();
    });
    
    // Package selection
    document.querySelectorAll('.special-deal-item').forEach(item => {
      const base = parseInt(item.dataset.base);
      item.querySelector('.add-package').addEventListener('click', () => {
        coinInput.value = base;
        updateSummary();
      });
    });
    
    // Toggle CVC
    function toggleVisibility(inputId, btn) {
      const input = document.getElementById(inputId);
      const icon = btn.querySelector("i");
      if (!input || !icon) return;
      if (input.type === "password") {
        input.type = "text";
        icon.classList.remove("bi-eye-fill");
        icon.classList.add("bi-eye-slash-fill");
      } else {
        input.type = "password";
        icon.classList.remove("bi-eye-slash-fill");
        icon.classList.add("bi-eye-fill");
      }
    }
    </script>
    
  
    
  
</body>
</html>
