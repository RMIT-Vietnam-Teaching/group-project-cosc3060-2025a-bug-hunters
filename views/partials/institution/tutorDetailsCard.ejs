<div class="container my-5">
  <div class="row g-4">
    <div class="col-lg-4">
      <div class="sidebar-box d-flex flex-column h-100">
        <div class="text-center">
          <img src="/images/defaultAvatar.png" class="rounded-circle mb-3" width="100" height="100" alt="Tutor Avatar" />
          <h5><%= user.lastName %></h5>
          <p class="text-muted small mb-0"><%= user.email %></p>
        </div>

        <hr />
        <h6 class="text-uppercase text-secondary small">Headline</h6>
        <p class="small mb-2"><%= user.headline || "No headline provided." %></p>

        <h6 class="text-uppercase text-secondary small mt-3">Bio</h6>
        <p class="small"><%= user.description || "No profile description available." %></p>
      </div>
    </div>

    <div class="col-lg-8">
      <div class="row row-cols-1 row-cols-md-2 g-4">
        <% courses.forEach(course => { %>
          <div class="col">
            <div class="card-course overflow-hidden">
              <div style="height: 140px; overflow: hidden;">
                <img src="<%= course.image || '/images/defaultCourse.png' %>" alt="Course Image"
                     class="img-fluid w-100" style="object-fit: cover; height: 100%;" />
              </div>
              <div class="p-3">
                <h6 class="fw-semibold mb-1"><%= course.name %></h6>
                <p class="text-muted small mb-2">
                  üë• <%= course.studentsEnrolled?.length || 0 %> Enrolled |
                  ‚≠ê <%= course.rating || 0 %> |
                  üïí <%= course.updatedAt?.toDateString() %>
                </p>
                <div class="d-flex gap-2">
                  <a href="/institution/editCourse/<%= course._id %>?returnTo=/institution/tutorDetail/<%= user._id %>"
                     class="btn btn-orange btn-sm flex-fill">Edit</a>
                  <button class="btn btn-orange-outline btn-sm flex-fill" data-bs-toggle="modal"
                          data-bs-target="#feedbackModal" data-course="<%= course.name %>">Feedback</button>
                </div>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    </div>
  </div>
</div>

<a href="/institution/manageTutors"
   class="btn btn-orange-outline position-fixed"
   style="bottom: 30px; left: 30px; z-index: 1050;">
  <i class="bi bi-arrow-left me-1"></i> Back to Instructor List
</a>

<div class="modal fade" id="feedbackModal" tabindex="-1" aria-labelledby="feedbackModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <form class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="feedbackModalLabel">Course Feedback</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="small text-muted mb-2" id="courseTitle"></p>
        <textarea class="form-control" rows="4" placeholder="Write your feedback here..."></textarea>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-orange">Submit Feedback</button>
      </div>
    </form>
  </div>
</div>



<style>
  .btn-orange {
    background-color: #e07b4f;
    color: white;
    border: none;
  }

  .btn-orange:hover {
    background-color: #cf6e44;
    color: white;
  }

  .btn-orange-outline {
    border: 2px solid #e07b4f;
    background-color: white;
    color: #e07b4f;
    border-radius: 50px;
    font-weight: 600;
    padding: 6px 16px;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .btn-orange-outline:hover {
    background-color: #e07b4f;
    color: white;
  }
</style>
