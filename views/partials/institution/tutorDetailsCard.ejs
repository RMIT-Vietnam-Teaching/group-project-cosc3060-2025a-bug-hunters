<div class="container my-5">
  <div class="row g-4">
    <!-- Tutor card (left) -->
    <div class="col-lg-4">
      <div class="sidebar-box d-flex flex-column justify-content-between p-3 shadow-sm" style="height: 480px; border-radius: 12px; background: #fff;">
        <div>
          <div class="text-center">
            <img src="/images/defaultAvatar.png" class="rounded-circle mb-3" width="100" height="100" alt="Tutor Avatar" />
            <h5><%= user.lastName %></h5>
            <p class="text-muted small mb-0"><%= user.email %></p>
          </div>
          <hr />
          <h6 class="text-uppercase text-secondary small">Headline</h6>
          <p class="small mb-2"><%= user.headline || "No headline provided." %></p>

          <h6 class="text-uppercase text-secondary small mt-3">Bio</h6>
          <p class="small"><%= user.description || "No profile description available." %></p>
        </div>

        <!-- Add Course Button -->
        <div class="text-center mt-3">
          <button class="btn btn-orange btn-sm px-4" data-bs-toggle="modal" data-bs-target="#addCourseModal">
            <i class="bi bi-plus-circle me-1"></i> Add Course
          </button>
        </div>
      </div>
    </div>

    <!-- Course cards (right) -->
    <div class="col-lg-8">
      <div class="row g-4">
        <% courses.forEach(course => { %>
          <div class="col-md-6">
            <div class="card-course overflow-hidden h-100">
              <div style="height: 140px; overflow: hidden;">
                <img src="<%= course.image || '/images/defaultCourse.png' %>" alt="Course Image"
                     class="img-fluid w-100" style="object-fit: cover; height: 100%;" />
              </div>
              <div class="p-3">
                <h6 class="fw-semibold mb-1"><%= course.name %></h6>
                <p class="text-muted small mb-2">
                  üë• <%= course.studentsEnrolled?.length || 0 %> Enrolled |
                  ‚≠ê <%= course.rating || 0 %> |
                  üïí <%= course.updatedAt?.toDateString() %>
                </p>
                <div class="d-grid" style="grid-template-columns: repeat(3, 1fr); gap: 8px;">
                  <a href="/institution/editCourse/<%= course._id %>?returnTo=/institution/tutorDetail/<%= user._id %>"
                     class="btn btn-orange-outline btn-sm w-100">Edit</a>
                  <form action="/institution/deleteCourse/<%= course._id %>?tutorId=<%= user._id %>"
                        method="POST" onsubmit="return confirm('Are you sure you want to delete this course?')">
                    <button type="submit" class="btn btn-orange-outline btn-sm w-100">Delete</button>
                  </form>
                  <button class="btn btn-orange-outline btn-sm w-100" data-bs-toggle="modal"
                          data-bs-target="#feedbackModal" data-course="<%= course.name %>">Feedback</button>
                </div>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    </div>
  </div>
</div>
<a href="/institution/manageTutors"
   class="btn btn-orange-outline position-fixed"
   style="bottom: 30px; left: 30px; z-index: 1050;">
  <i class="bi bi-arrow-left me-1"></i> Back to Instructor List
</a>


<!-- Feedback Modal -->
<div class="modal fade" id="feedbackModal" tabindex="-1" aria-labelledby="feedbackModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <form class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="feedbackModalLabel">Course Feedback</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="small text-muted mb-2" id="courseTitle"></p>
        <textarea class="form-control" rows="4" placeholder="Write your feedback here..."></textarea>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-orange">Submit Feedback</button>
      </div>
    </form>
  </div>
</div>

<!-- Required Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Styling -->
<style>
  .card-course {
    border: 1px solid #ddd;
    border-radius: 12px;
    background: white;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    transition: box-shadow 0.2s ease;
    width: 100%;
  }

  .btn-orange {
    background-color: #e07b4f;
    color: white;
    border: none;
  }

  .btn-orange:hover {
    background-color: #cf6e44;
    color: white;
  }

  .btn-orange-outline {
    border: 2px solid #e07b4f;
    background-color: white;
    color: #e07b4f;
    border-radius: 50px;
    font-weight: 600;
    padding: 6px 16px;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .btn-orange-outline:hover {
    background-color: #e07b4f;
    color: white;
  }
</style>
